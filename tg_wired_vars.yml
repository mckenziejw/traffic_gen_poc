---
clients:
- alias: client1
  hostname: desktop1-mgmt
  user: lab
  networks:
  - name: lan
    tf_name: lan_1
    driver: ipvlan
    ipam:
      subnet: 10.99.99.0/24
      ip_range: 10.99.99.128/25
      gateway: 10.99.99.1
    options:
      parent: ens192
      ipvlan_mode: l2
  - name: mgmt
    tf_name: mgmt_1
    driver: ipvlan
    ipam:
      subnet: 192.168.10.0/24
      ip_range: 192.168.10.0/24
      gateway: 192.168.10.1
    options:
      parent: ens160
      ipvlan_mode: l2
  containers:
  - image: "autofunbot/tg_web_client:0.2"
    tf_name: web_client_1
    hostname: web-client-1
    name: web-client-1
    options:
      shm_size: 2048
    networks:
    - name: lan
      ip_address: 10.99.99.129
    - name: mgmt
      ip_address: 192.168.10.111
    env:
      MQTT_SERVER: mqtt-server-1-mgmt
      TGTYPE: web
    depends_on:
      - docker_network.lan_1
      - docker_container.mqtt_server_1
      - docker_network.mgmt_1
  - image: "autofunbot/tg_web_client:0.2"
    tf_name: web_client_2
    hostname: web-client-2
    name: web-client-2
    options:
      shm_size: 2048
    networks:
    - name: lan
      ip_address: 10.99.99.130
    - name: mgmt
      ip_address: 192.168.10.112
    env:
      MQTT_SERVER: mqtt-server-1-mgmt
      TGTYPE: web
    depends_on:
      - docker_network.lan_1
      - docker_container.mqtt_server_1
      - docker_network.mgmt_1
  - image: "autofunbot/tg_web_client:0.2"
    tf_name: sql_client_1
    hostname: sql-client-1
    name: sql-client
    options:
      shm_size: 2048
    networks:
    - name: lan
      ip_address: 10.99.99.131
    - name: mgmt
      ip_address: 192.168.10.113
    env:
      MQTT_SERVER: mqtt-server-1-mgmt
      TGTYPE: sql
    depends_on:
      - docker_network.lan_1
      - docker_container.mqtt_server_1
      - docker_network.mgmt_1
  - image: "autofunbot/tg_web_client:0.2"
    tf_name: mongo_client_1
    hostname: mongo-client-1
    name: mongo-client
    options:
      shm_size: 2048
    networks:
    - name: lan
      ip_address: 10.99.99.132
    - name: mgmt
      ip_address: 192.168.10.114
    env:
      MQTT_SERVER: mqtt-server-1-mgmt
      TGTYPE: mongo
    depends_on:
      - docker_network.lan_1
      - docker_container.mqtt_server_1
      - docker_network.mgmt_1
- alias: client2
  hostname: desktop2-mgmt
  user: lab
  networks:
  - name: lan
    tf_name: lan_2
    driver: ipvlan
    ipam:
      subnet: 10.88.88.0/24
      ip_range: 10.88.88.128/25
      gateway: 10.88.88.1
    options:
      parent: ens192
      ipvlan_mode: l2
  - name: mgmt
    tf_name: mgmt_2
    driver: ipvlan
    ipam:
      subnet: 192.168.10.0/24
      ip_range: 192.168.10.0/24
      gateway: 192.168.10.1
    options:
      parent: ens160
      ipvlan_mode: l2
  containers:
  - image: "autofunbot/tg_web_client:0.2"
    tf_name: web_client_3
    hostname: web-client-3
    name: web-client-3
    options:
      shm_size: 2048
    networks:
    - name: lan
      ip_address: 10.88.88.129
    - name: mgmt
      ip_address: 192.168.10.121
    env:
      MQTT_SERVER: mqtt-server-1-mgmt
      TGTYPE: web
    depends_on:
      - docker_network.lan_2
      - docker_container.mqtt_server_1
      - docker_network.mgmt_2
  - image: "autofunbot/tg_web_client:0.2"
    tf_name: web_client_4
    hostname: web-client-4
    name: web-client-4
    options:
      shm_size: 2048
    networks:
    - name: lan
      ip_address: 10.88.88.130
    - name: mgmt
      ip_address: 192.168.10.122
    env:
      MQTT_SERVER: mqtt-server-1-mgmt
      TGTYPE: web
    depends_on:
      - docker_network.lan_2
      - docker_container.mqtt_server_1
      - docker_network.mgmt_2
  - image: "autofunbot/tg_web_client:0.2"
    tf_name: sql_client_2
    hostname: sql-client-2
    name: sql-client-2
    options:
      shm_size: 2048
    networks:
    - name: lan
      ip_address: 10.88.88.131
    - name: mgmt
      ip_address: 192.168.10.123
    env:
      MQTT_SERVER: mqtt-server-1-mgmt
      TGTYPE: sql
    depends_on:
      - docker_network.lan_2
      - docker_container.mqtt_server_1
      - docker_network.mgmt_2
  - image: "autofunbot/tg_web_client:0.2"
    tf_name: mongo_client_2
    hostname: mongo-client-2
    name: mongo-client-2
    options:
      shm_size: 2048
    networks:
    - name: lan
      ip_address: 10.88.88.132
    - name: mgmt
      ip_address: 192.168.10.124
    env:
      MQTT_SERVER: mqtt-server-1-mgmt
      TGTYPE: mongo
    depends_on:
      - docker_network.lan_2
      - docker_container.mqtt_server_1
      - docker_network.mgmt_2
- alias: client3
  hostname: desktop4-mgmt
  user: lab
  networks:
  - name: lan
    tf_name: lan_3
    driver: ipvlan
    ipam:
      subnet: 10.66.66.0/24
      ip_range: 10.66.66.128/25
      gateway: 10.66.66.1
    options:
      parent: ens192
      ipvlan_mode: l2
  - name: mgmt
    tf_name: mgmt_3
    driver: ipvlan
    ipam:
      subnet: 192.168.10.0/24
      ip_range: 192.168.10.0/24
      gateway: 192.168.10.1
    options:
      parent: ens160
      ipvlan_mode: l2
  containers:
  - image: "mongo"
    tf_name: mongo_server_1
    hostname: mongo-server-1
    name: mongo-server-1
    networks:
    - name: lan
      ip_address: 10.66.66.129
    - name: mgmt
      ip_address: 192.168.10.141
    env:
      MQTT_SERVER: mqtt-server-1-mgmt
      TGTYPE: mongo
    depends_on:
      - docker_network.lan_3
      - docker_network.mgmt_3
  - image: "eclipse-mosquitto"
    tf_name: mqtt_server_1
    hostname: mqtt-server-1
    name: mqtt-server-1
    networks:
    - name: lan
      ip_address: 10.66.66.130
    - name: mgmt
      ip_address: 192.168.10.142
    mounts:
      - target: /mosquitto/config/mosquitto.conf
        source: /home/lab/mosquitto/mosquitto.conf
        type: bind
    depends_on:
      - docker_network.lan_3
      - docker_network.mgmt_3
  - image: "eclipse-mosquitto"
    tf_name: mqtt_server_2
    hostname: mqtt-server-2
    name: mqtt-server-2
    networks:
    - name: lan
      ip_address: 10.66.66.131
    - name: mgmt
      ip_address: 192.168.10.143
    mounts:
      - target: /mosquitto/config/mosquitto.conf
        source: /home/lab/mosquitto/mosquitto.conf
        type: bind
    depends_on:
      - docker_network.lan_3
      - docker_network.mgmt_3
  - image: "mysql:latest"
    tf_name: sql_server_1
    hostname: sql-server-1
    name: sql-server-1
    networks:
    - name: lan
      ip_address: 10.66.66.132
    - name: mgmt
      ip_address: 192.168.10.144
    env:
      MQTT_SERVER: mqtt-server-1-mgmt
      TGTYPE: sql
      MYSQL_ROOT_PASSWORD: lab@LAB123!
      MYSQL_USER: lab
      MYSQL_PASSWORD: lab@LAB123!
      MYSQL_DATABASE: lab_db
    depends_on:
      - docker_network.lan_3
      - docker_container.mqtt_server_1
      - docker_network.mgmt_3
- alias: client4
  hostname: desktop5-mgmt
  user: lab
  networks:
  - name: lan
    tf_name: lan_4
    driver: ipvlan
    ipam:
      subnet: 10.55.55.0/24
      ip_range: 10.55.55.128/25
      gateway: 10.55.55.1
    options:
      parent: ens192
      ipvlan_mode: l2
  - name: mgmt
    tf_name: mgmt_4
    driver: ipvlan
    ipam:
      subnet: 192.168.10.0/24
      ip_range: 192.168.10.0/24
      gateway: 192.168.10.1
    options:
      parent: ens160
      ipvlan_mode: l2
  containers:
  - image: "autofunbot/tg_web_server:latest"
    tf_name: web_server_1
    hostname: web-server-1
    name: web-server-1
    networks:
    - name: lan
      ip_address: 10.55.55.129
    - name: mgmt
      ip_address: 192.168.10.151
    env:
      TARGETS: web-server-2
      PORT: 80
    depends_on:
      - docker_network.lan_4
      - docker_network.mgmt_4
  - image: "autofunbot/tg_web_server:latest"
    tf_name: web_server_2
    hostname: web-server-2
    name: web-server-2
    networks:
    - name: lan
      ip_address: 10.55.55.130
    - name: mgmt
      ip_address: 192.168.10.152
    env:
      TARGETS: web-server-2
      PORT: 80
    depends_on:
      - docker_network.lan_4
      - docker_network.mgmt_4
  - image: "autofunbot/tg_web_server:latest"
    tf_name: web_server_3
    hostname: web-server-3
    name: web-server-3
    networks:
    - name: lan
      ip_address: 10.55.55.131
    - name: mgmt
      ip_address: 192.168.10.153
    env:
      TARGETS: web-server-3
      PORT: 80
    depends_on:
      - docker_network.lan_4
      - docker_network.mgmt_4
  - image: "autofunbot/tg_web_server:latest"
    tf_name: web_server_4
    hostname: web-server-4
    name: web-server-4
    networks:
    - name: lan
      ip_address: 10.55.55.132
    - name: mgmt
      ip_address: 192.168.10.154
    env:
      TARGETS: web-server-4
      PORT: 80
    depends_on:
      - docker_network.lan_4
      - docker_network.mgmt_4